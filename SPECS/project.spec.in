Name:       @PROJECT_NAME@
Version:    @PRJ_VER@
Release:    1%{?dist}
Summary:    @PRJ_SUMMARY@
License:    @LICENSE@
Group:      System Environment/Libraries
URL:        http://code.google.com/p/ibus/
Source0:    http://ibus.googlecode.com/files/@SOURCE_PACKAGE@

BuildRoot:  %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
BuildArch:  noarch

BuildRequires:  cmake >= 2.4

Requires:   cmake >= 2.4

%description
@PRJ_DESCRIPTION@

%prep
%setup -q -n %{name}-%{version}-Source

%build
# $RPM_OPT_FLAGS should be  loaded from cmake macro.
%cmake -DCMAKE_BUILD_TYPE:STRING=RelWithDebInfo .
%__make VERBOSE=1  %{?_smp_mflags}

%install
%__rm -rf $RPM_BUILD_ROOT
%__make install DESTDIR=$RPM_BUILD_ROOT
# We install document using %doc
(cd @PRJ_DOC_DIR@
    %__rm -rf @PRJ_DOC_LIST@
)

%clean
%__rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root,-)
%doc @PRJ_DOC_LIST@

%{_datadir}/cmake/Modules/CMakeVersion.cmake
%{_datadir}/cmake/Modules/CompileEnv.cmake
%{_datadir}/cmake/Modules/DateTimeFormat.cmake
%{_datadir}/cmake/Modules/ManageString.cmake
%{_datadir}/cmake/Modules/ManageVariable.cmake
%{_datadir}/cmake/Modules/ManageVersion.cmake
%{_datadir}/cmake/Modules/PackRPM.cmake
%{_datadir}/cmake/Modules/PackSource.cmake
%{_datadir}/cmake/Modules/UseDoxygen.cmake
%{_datadir}/cmake/Modules/UseFedpkg.cmake
%{_datadir}/cmake/Modules/UseGConf.cmake
%{_datadir}/cmake/Modules/UseGettext.cmake
%{_datadir}/cmake/Modules/UseHostingService.cmake
%{_datadir}/cmake/Modules/UseUninstall.cmake
%{_datadir}/cmake/Modules/cmake_uninstall.cmake.in

%changelog
* @TODAY_CHANGELOG@ @MAINTAINER@ - @PRJ_VER@-@PRJ_RELEASE_NO@
@CHANGELOG_ITEMS@

@RPM_CHANGELOG_PREV@

